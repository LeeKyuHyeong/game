<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: adminHead('Î©ÄÌã∞ Ïö¥ÏòÅ')}"></head>
<body class="admin-page">
<link rel="stylesheet" th:href="@{/css/admin/table-mobile-collapse.css}">
<link rel="stylesheet" th:href="@{/css/admin/multi-index.css}">
<div class="admin-container">
    <th:block th:replace="~{admin/layout/sidebar :: sidebar}"></th:block>

    <main class="main-content">
        <header class="content-header">
            <h1>Î©ÄÌã∞ Ïö¥ÏòÅ</h1>
        </header>

        <!-- ÌÜµÌï© ÌÜµÍ≥Ñ Ïπ¥Îìú -->
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-value" th:text="${totalRooms}">0</div>
                <div class="stat-label">Ï†ÑÏ≤¥ Î∞©</div>
            </div>
            <div class="stat-card waiting">
                <div class="stat-value" th:text="${waitingCount}">0</div>
                <div class="stat-label">ÎåÄÍ∏∞ Ï§ë</div>
            </div>
            <div class="stat-card playing">
                <div class="stat-value" th:text="${playingCount}">0</div>
                <div class="stat-label">Í≤åÏûÑ Ï§ë</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" th:text="${totalChats}">0</div>
                <div class="stat-label">Ï†ÑÏ≤¥ Ï±ÑÌåÖ</div>
            </div>
        </div>

        <!-- ÌÉ≠ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="tab-navigation">
            <button class="tab-btn" th:classappend="${activeTab == 'room'} ? 'active'"
                    onclick="switchTab('room')">
                <span class="tab-icon">üö™</span>
                <span class="tab-text">Î∞© Í¥ÄÎ¶¨</span>
                <span class="tab-badge" th:text="${totalRooms}">0</span>
            </button>
            <button class="tab-btn" th:classappend="${activeTab == 'chat'} ? 'active'"
                    onclick="switchTab('chat')">
                <span class="tab-icon">üí¨</span>
                <span class="tab-text">Ï±ÑÌåÖ ÎÇ¥Ïó≠</span>
                <span class="tab-badge" th:text="${totalChats}">0</span>
            </button>
        </div>

        <!-- ÌÉ≠ ÏΩòÌÖêÏ∏† -->
        <div class="tab-content" id="tabContent">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <span>Î°úÎî© Ï§ë...</span>
            </div>
        </div>
    </main>
</div>

<!-- Î∞© ÏÉÅÏÑ∏ Î™®Îã¨ -->
<div id="roomDetailModal" class="modal">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2>Î∞© ÏÉÅÏÑ∏ Ï†ïÎ≥¥</h2>
            <button class="close-btn" onclick="closeModal('roomDetailModal')">&times;</button>
        </div>
        <div class="modal-body" id="roomDetailContent">
            <!-- ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-cancel" onclick="closeModal('roomDetailModal')">Îã´Í∏∞</button>
        </div>
    </div>
</div>

<!-- Ï±ÑÌåÖ ÎÇ¥Ïó≠ Î™®Îã¨ -->
<div id="chatModal" class="modal">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2 id="chatModalTitle">Ï±ÑÌåÖ ÎÇ¥Ïó≠</h2>
            <button class="close-btn" onclick="closeModal('chatModal')">&times;</button>
        </div>
        <div class="modal-body" id="chatContent">
            <!-- ÎèôÏ†ÅÏúºÎ°ú Ï±ÑÏõåÏßê -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" id="deleteAllChatsBtn" style="display: none;">Ï†ÑÏ≤¥ ÏÇ≠Ï†ú</button>
            <button type="button" class="btn btn-cancel" onclick="closeModal('chatModal')">Îã´Í∏∞</button>
        </div>
    </div>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/admin/admin-multi-index.js}"></script>
<script th:inline="javascript">
    currentTab = [[${activeTab}]];
</script>
</body>
</html>
