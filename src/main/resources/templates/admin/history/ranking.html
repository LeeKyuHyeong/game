<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: adminHead('Îû≠ÌÇπ')}"></head>
<link rel="stylesheet" href="/css/admin/mobile-stats.css">
<body class="admin-page ranking-mobile">
<div class="admin-container">
    <th:block th:replace="~{admin/layout/sidebar :: sidebar}"></th:block>

    <main class="main-content">
        <header class="content-header">
            <h1>üèÜ Îû≠ÌÇπ</h1>
        </header>

        <div class="period-tabs">
            <a th:href="@{/admin/history/ranking(period='daily')}"
               th:classappend="${period == 'daily'} ? 'active'" class="period-tab">Ïò§Îäò</a>
            <a th:href="@{/admin/history/ranking(period='weekly')}"
               th:classappend="${period == 'weekly'} ? 'active'" class="period-tab">Ïù¥Î≤à Ï£º</a>
            <a th:href="@{/admin/history/ranking(period='all')}"
               th:classappend="${period == 'all'} ? 'active'" class="period-tab">Ï†ÑÏ≤¥</a>
        </div>

        <div class="ranking-container">
            <div class="top-three" th:if="${#lists.size(rankings) >= 3}">
                <div class="rank-card second">
                    <div class="rank-medal">ü•à</div>
                    <div class="rank-number">2</div>
                    <div class="rank-nickname" th:text="${rankings[1].nickname}"></div>
                    <div class="rank-score" th:text="${rankings[1].totalScore} + 'Ï†ê'"></div>
                    <div class="rank-info" th:text="'Ï†ïÎãµÎ•† ' + ${#numbers.formatDecimal(rankings[1].accuracyRate, 0, 1)} + '%'"></div>
                </div>
                <div class="rank-card first">
                    <div class="rank-medal">ü•á</div>
                    <div class="rank-number">1</div>
                    <div class="rank-nickname" th:text="${rankings[0].nickname}"></div>
                    <div class="rank-score" th:text="${rankings[0].totalScore} + 'Ï†ê'"></div>
                    <div class="rank-info" th:text="'Ï†ïÎãµÎ•† ' + ${#numbers.formatDecimal(rankings[0].accuracyRate, 0, 1)} + '%'"></div>
                </div>
                <div class="rank-card third">
                    <div class="rank-medal">ü•â</div>
                    <div class="rank-number">3</div>
                    <div class="rank-nickname" th:text="${rankings[2].nickname}"></div>
                    <div class="rank-score" th:text="${rankings[2].totalScore} + 'Ï†ê'"></div>
                    <div class="rank-info" th:text="'Ï†ïÎãµÎ•† ' + ${#numbers.formatDecimal(rankings[2].accuracyRate, 0, 1)} + '%'"></div>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table ranking-table">
                    <thead>
                    <tr>
                        <th>ÏàúÏúÑ</th>
                        <th>Î≥ÑÎ™Ö</th>
                        <th>Ï†êÏàò</th>
                        <th>Ï†ïÎãµ</th>
                        <th>Ï†ïÎãµÎ•†</th>
                        <th>Í≤åÏûÑÏú†Ìòï</th>
                        <th>ÌîåÎ†àÏù¥ ÏãúÍ∞Ñ</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="rank, idx : ${rankings}" th:classappend="${idx.index < 3} ? 'top-rank'">
                        <td>
                            <span class="rank-num" th:text="${idx.index + 1}"></span>
                        </td>
                        <td th:text="${rank.nickname}"></td>
                        <td class="score-cell" th:text="${rank.totalScore}"></td>
                        <td th:text="${rank.correctCount} + '/' + ${rank.completedRounds}"></td>
                        <td th:text="${#numbers.formatDecimal(rank.accuracyRate, 0, 1)} + '%'"></td>
                        <td>
                                    <span class="type-badge small" th:classappend="${rank.gameType.name()}"
                                          th:text="${rank.gameType.name() == 'SOLO_HOST'} ? 'ÏßÑÌñâÏö©' : 'ÎßûÏ∂îÍ∏∞'"></span>
                        </td>
                        <td th:text="${#temporals.format(rank.startedAt, 'MM-dd HH:mm')}"></td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(rankings)}">
                        <td colspan="7" class="empty-row">Îû≠ÌÇπ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
</body>
</html>