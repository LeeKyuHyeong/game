<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: adminHead('게임 관리')}"></head>
<body class="admin-page">
<link rel="stylesheet" th:href="@{/css/admin/table-mobile-collapse.css}">
<link rel="stylesheet" th:href="@{/css/admin/mobile-stats.css}">
<link rel="stylesheet" th:href="@{/css/admin/ranking-tier.css}">
<link rel="stylesheet" th:href="@{/css/admin/history-index.css}">
<div class="admin-container">
    <th:block th:replace="~{admin/layout/sidebar :: sidebar}"></th:block>

    <main class="main-content">
        <header class="content-header">
            <h1>게임 관리</h1>
        </header>

        <!-- 통합 통계 카드 -->
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon">🎮</div>
                <div class="stat-info">
                    <span class="stat-value" th:text="${todayCount} ?: 0">0</span>
                    <span class="stat-label">오늘 게임</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">📈</div>
                <div class="stat-info">
                    <span class="stat-value" th:text="${#numbers.formatDecimal(avgScore ?: 0, 0, 1)}">0</span>
                    <span class="stat-label">평균 점수</span>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">📝</div>
                <div class="stat-info">
                    <span class="stat-value" th:text="${totalGames} ?: 0">0</span>
                    <span class="stat-label">전체 게임</span>
                </div>
            </div>
        </div>

        <!-- 탭 네비게이션 -->
        <div class="tab-navigation">
            <button class="tab-btn" th:classappend="${activeTab == 'history'} ? 'active'"
                    onclick="switchTab('history')">
                <span class="tab-icon">📊</span>
                <span class="tab-text">게임 이력</span>
            </button>
            <button class="tab-btn" th:classappend="${activeTab == 'ranking'} ? 'active'"
                    onclick="switchTab('ranking')">
                <span class="tab-icon">🏆</span>
                <span class="tab-text">랭킹</span>
            </button>
        </div>

        <!-- 탭 콘텐츠 -->
        <div class="tab-content" id="tabContent">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <span>로딩 중...</span>
            </div>
        </div>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/common/toggle-row-expand.js}"></script>
<script th:src="@{/js/admin/admin-history.js}"></script>
<script th:inline="javascript">
const activeTab = [[${activeTab}]];
</script>
</body>
</html>
