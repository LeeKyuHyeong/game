<!-- 랭킹 히스토리 스냅샷 데이터 (AJAX 로딩용) -->
<div class="tab-panel ranking-history-panel" xmlns:th="http://www.thymeleaf.org">
    <!-- 히스토리 안내 배너 -->
    <div class="ranking-history-banner">
        <div class="history-banner-content">
            <span class="history-banner-icon">&#128197;</span>
            <span class="history-banner-text">
                과거 스냅샷 조회 중: <strong th:text="${periodStart} + ' ~ ' + ${periodEnd}"></strong>
            </span>
        </div>
        <button class="btn btn-primary btn-sm" onclick="loadRankingHistoryPeriod('')">실시간으로 돌아가기</button>
    </div>

    <!-- 랭킹 타입별 데이터 -->
    <th:block th:each="entry : ${groupedHistory}">
        <div class="history-section">
            <h4 class="history-section-title" th:text="${entry.key}"></h4>
            <div class="table-container">
                <table class="data-table ranking-table">
                    <thead>
                    <tr>
                        <th class="col-rank">순위</th>
                        <th>닉네임</th>
                        <th>점수</th>
                        <th>게임 수</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="record : ${entry.value}" onclick="toggleRowExpand(this)">
                        <td data-label="순위" class="rank-cell">
                            <span class="rank-badge"
                                  th:classappend="${record.rankPosition <= 3} ? ('rank-' + ${record.rankPosition})">
                                <span th:text="${record.rankPosition}"></span>
                            </span>
                        </td>
                        <td data-label="닉네임" th:text="${record.nickname}"></td>
                        <td data-label="점수" th:text="${record.score}"></td>
                        <td data-label="게임 수" th:text="${record.gamesPlayed != null ? record.gamesPlayed + '게임' : '-'}"></td>
                    </tr>
                    <tr th:if="${entry.value.isEmpty()}">
                        <td colspan="4" class="empty-row">데이터가 없습니다.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </th:block>

    <div th:if="${groupedHistory == null or groupedHistory.isEmpty()}" class="empty-state">
        <p>해당 기간의 스냅샷 데이터가 없습니다.</p>
    </div>
</div>
