<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: adminHead('ê²Œì„ ê´€ë¦¬')}"></head>
<body class="admin-page">
<link rel="stylesheet" th:href="@{/css/admin/table-mobile-collapse.css}">
<link rel="stylesheet" th:href="@{/css/admin/member-index.css}">
<link rel="stylesheet" th:href="@{/css/admin/history-index.css}">
<link rel="stylesheet" th:href="@{/css/admin/mobile-stats.css}">
<link rel="stylesheet" th:href="@{/css/admin/ranking-tier.css}">
<link rel="stylesheet" th:href="@{/css/admin/multi-index.css}">
<link rel="stylesheet" th:href="@{/css/admin/challenge-index.css}">
<div class="admin-container">
    <th:block th:replace="~{admin/layout/sidebar :: sidebar}"></th:block>

    <main class="main-content">
        <header class="content-header">
            <h1>ê²Œì„ ê´€ë¦¬</h1>
        </header>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="tab-navigation">
            <button class="tab-btn" th:classappend="${activeTab == 'history'} ? 'active'"
                    data-tab="history" onclick="switchTab('history')">
                <span class="tab-icon">ğŸ“Š</span>
                <span class="tab-text">ê²Œì„ ì´ë ¥</span>
            </button>
            <button class="tab-btn" th:classappend="${activeTab == 'multi'} ? 'active'"
                    data-tab="multi" onclick="switchTab('multi')">
                <span class="tab-icon">ğŸ®</span>
                <span class="tab-text">ë©€í‹°ê²Œì„</span>
            </button>
            <button class="tab-btn" th:classappend="${activeTab == 'challenge'} ? 'active'"
                    data-tab="challenge" onclick="switchTab('challenge')">
                <span class="tab-icon">â­</span>
                <span class="tab-text">ì±Œë¦°ì§€</span>
            </button>
        </div>

        <!-- íƒ­ ì½˜í…ì¸  -->
        <div class="tab-content" id="tabContent">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <span>ë¡œë”© ì¤‘...</span>
            </div>
        </div>
    </main>
</div>

<!-- ë°© ìƒì„¸ ëª¨ë‹¬ -->
<div id="roomDetailModal" class="modal">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2>ë°© ìƒì„¸ ì •ë³´</h2>
            <button class="close-btn" onclick="closeModal('roomDetailModal')">&times;</button>
        </div>
        <div class="modal-body" id="roomDetailContent">
            <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-cancel" onclick="closeModal('roomDetailModal')">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<!-- ì±„íŒ… ë‚´ì—­ ëª¨ë‹¬ -->
<div id="chatModal" class="modal">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2 id="chatModalTitle">ì±„íŒ… ë‚´ì—­</h2>
            <button class="close-btn" onclick="closeModal('chatModal')">&times;</button>
        </div>
        <div class="modal-body" id="chatContent">
            <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-danger" id="deleteAllChatsBtn" style="display: none;">ì „ì²´ ì‚­ì œ</button>
            <button type="button" class="btn btn-cancel" onclick="closeModal('chatModal')">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<!-- ê¸°ë¡ ìƒì„¸ ëª¨ë‹¬ (ì±Œë¦°ì§€) -->
<div id="detailModal" class="modal">
    <div class="modal-content modal-md">
        <div class="modal-header">
            <h2 id="detailModalTitle">ê¸°ë¡ ìƒì„¸</h2>
            <button class="close-btn" onclick="closeModal('detailModal')">&times;</button>
        </div>
        <div class="modal-body" id="detailContent">
            <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-cancel" onclick="closeModal('detailModal')">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<!-- ì¥ë¥´ ëª©ë¡ (ì±Œë¦°ì§€ íƒ­ì—ì„œ ì‚¬ìš©) -->
<script th:inline="javascript">
    var genres = /*[[${genres}]]*/ [];
</script>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/common/toggle-row-expand.js}"></script>
<script th:src="@{/js/admin/admin-history.js}"></script>
<script th:src="@{/js/admin/admin-multi-index.js}"></script>
<script th:src="@{/js/admin/admin-challenge-index.js}"></script>
<script th:src="@{/js/admin/admin-game-index.js}"></script>
<script th:inline="javascript">
    currentTab = [[${activeTab}]];
</script>
</body>
</html>
