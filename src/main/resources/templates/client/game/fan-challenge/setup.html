<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('최고 팬 챌린지 - Song Quiz')}"></head>
<link rel="stylesheet" th:href="@{/css/client/setup.css}">
<link rel="stylesheet" th:href="@{/css/client/game-fan-challenge.css}">
<body class="client-page">
<div class="client-container">
    <header class="client-header compact">
        <a href="/" class="back-home">← 홈으로</a>
        <h1>최고 팬 챌린지</h1>
        <p>진정한 팬이라면 5초 안에!</p>
    </header>

    <main class="setup-main">
        <div class="setup-card fan-challenge-card">
            <div class="challenge-intro">
                <div class="challenge-icon">&#127942;</div>
                <h2>진정한 팬이라면 5초 안에!</h2>
                <p class="challenge-desc">
                    선택한 아티스트의 <strong>모든 곡</strong>을 5초 안에 맞춰보세요.<br>
                    3번 틀리면 게임 오버!
                </p>
            </div>

            <div class="setup-step">
                <h3>닉네임</h3>
                <input type="text" id="nickname" class="input-text"
                       th:value="${nickname}" placeholder="닉네임을 입력하세요" maxlength="20">
            </div>

            <div class="setup-step">
                <h3>아티스트 선택</h3>
                <div class="artist-search-container">
                    <input type="text" id="artistSearch" class="input-text"
                           placeholder="아티스트 검색...">
                    <div id="artistSearchResults" class="search-results"></div>
                </div>

                <div class="selected-artist-container" id="selectedArtistContainer" style="display: none;">
                    <div class="selected-artist">
                        <span id="selectedArtistName"></span>
                        <span id="selectedArtistCount" class="song-count"></span>
                        <button type="button" class="btn-remove" onclick="clearSelectedArtist()">X</button>
                    </div>
                </div>

                <div class="artist-list-container">
                    <h4>인기 아티스트</h4>
                    <div id="artistList" class="artist-list"></div>
                </div>
            </div>

            <div class="setup-step rules-section">
                <h3>게임 규칙</h3>
                <ul class="rules-list">
                    <li><span class="rule-icon">&#9200;</span> 곡당 <strong>5초</strong> 제한시간</li>
                    <li><span class="rule-icon">&#10084;</span> 라이프 <strong>3개</strong> (오답/시간초과 시 -1)</li>
                    <li><span class="rule-icon">&#127925;</span> 해당 아티스트의 <strong>모든 곡</strong> 출제</li>
                    <li><span class="rule-icon">&#128683;</span> 스킵 <strong>불가능</strong></li>
                </ul>
            </div>

            <div class="login-notice" th:if="${member == null}">
                <p>&#128274; 로그인하면 기록이 저장됩니다!</p>
                <a th:href="@{/auth/login}" class="btn-login-link">로그인하기</a>
            </div>

            <button type="button" id="startBtn" class="btn-start" onclick="startGame()" disabled>
                도전 시작!
            </button>
        </div>
    </main>
</div>

<script th:inline="javascript">
    const memberNickname = [[${nickname}]];
</script>
<script th:src="@{/js/client/game-fan-challenge-setup.js}"></script>
</body>
</html>
