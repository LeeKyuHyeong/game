<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('게임 설정 - Song Quiz')}"></head>
<body class="client-page">
<div class="client-container">
    <header class="client-header compact">
        <a href="/" class="back-home">← 홈으로</a>
        <h1>🎤 게임 진행용</h1>
        <p>친구들과 함께 노래 맞추기!</p>
    </header>

    <main class="setup-main">
        <div class="setup-card">
            <div class="setup-step" id="step1">
                <h2>1. 기본 설정</h2>

                <div class="form-group">
                    <label>진행 인원</label>
                    <div class="player-count-selector">
                        <button type="button" class="count-btn" onclick="changePlayerCount(-1)">-</button>
                        <span id="playerCount">2</span>
                        <button type="button" class="count-btn" onclick="changePlayerCount(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>진행 라운드 <span id="songCountInfo" class="song-count-info"></span></label>
                    <div class="round-options">
                        <button type="button" class="round-btn" data-value="5">5</button>
                        <button type="button" class="round-btn active" data-value="10">10</button>
                        <button type="button" class="round-btn" data-value="15">15</button>
                        <button type="button" class="round-btn" data-value="20">20</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>게임 모드</label>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="RANDOM" checked>
                            <span class="mode-label">
                                    <strong>전체 랜덤</strong>
                                    <small>모든 노래 중 랜덤 출제</small>
                                </span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="FIXED_GENRE">
                            <span class="mode-label">
                                    <strong>장르 고정</strong>
                                    <small>선택한 장르에서만 출제</small>
                                </span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="gameMode" value="GENRE_PER_ROUND">
                            <span class="mode-label">
                                    <strong>매 라운드 선택</strong>
                                    <small>매 라운드마다 장르 선택</small>
                                </span>
                        </label>
                    </div>
                </div>

                <div class="form-group genre-select" id="genreSelect" style="display:none;">
                    <label>장르 선택</label>
                    <select id="fixedGenreId">
                        <option value="">선택하세요</option>
                        <option th:each="genre : ${genres}" th:value="${genre.id}" th:text="${genre.name}"></option>
                    </select>
                </div>

                <button type="button" class="btn btn-next" onclick="goToStep2()">다음 →</button>
            </div>

            <div class="setup-step" id="step2" style="display:none;">
                <h2>2. 상세 설정 (선택)</h2>

                <div class="form-group">
                    <label>연도 범위</label>
                    <div class="year-range">
                        <input type="number" id="yearFrom" placeholder="시작" min="1900" max="2099">
                        <span>~</span>
                        <input type="number" id="yearTo" placeholder="끝" min="1900" max="2099">
                    </div>
                </div>

                <div class="form-group">
                    <label>아티스트 유형</label>
                    <div class="artist-type-options">
                        <label class="type-option">
                            <input type="radio" name="artistType" value="all" checked>
                            <span>전체</span>
                        </label>
                        <label class="type-option">
                            <input type="radio" name="artistType" value="solo">
                            <span>솔로만</span>
                        </label>
                        <label class="type-option">
                            <input type="radio" name="artistType" value="group">
                            <span>그룹만</span>
                        </label>
                    </div>
                </div>

                <div class="step-buttons">
                    <button type="button" class="btn btn-back" onclick="goToStep1()">← 이전</button>
                    <button type="button" class="btn btn-next" onclick="goToStep3()">다음 →</button>
                </div>
            </div>

            <div class="setup-step" id="step3" style="display:none;">
                <h2>3. 플레이어 입력</h2>

                <div class="players-input" id="playersInput">
                    <!-- 동적으로 생성 -->
                </div>

                <div class="step-buttons">
                    <button type="button" class="btn btn-back" onclick="goToStep2()">← 이전</button>
                    <button type="button" class="btn btn-start" onclick="startGame()">게임 시작! 🎮</button>
                </div>
            </div>
        </div>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/client/game-host-setup.js}"></script>
</body>
</html>