<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('방 만들기 - Song Quiz')}"></head>
<body class="client-page">
<div class="client-container">
    <header class="client-header compact">
        <nav class="header-nav">
            <a href="/game/multi" class="btn-home">🎮 로비</a>
            <a href="/" class="btn-home">🏠 홈</a>
        </nav>
        <h1>➕ 방 만들기</h1>
        <p>새로운 멀티게임 방을 만들어보세요!</p>
    </header>

    <main class="create-main">
        <div class="create-card">
            <div class="form-group">
                <label for="roomName">방 이름 <span class="required">*</span></label>
                <input type="text" id="roomName" placeholder="예: 즐겜방, 같이해요~" maxlength="30" class="input-full">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="maxPlayers">최대 인원</label>
                    <select id="maxPlayers" class="select-full">
                        <option value="2">2명</option>
                        <option value="4">4명</option>
                        <option value="6">6명</option>
                        <option value="8" selected>8명</option>
                        <option value="10">10명</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="totalRounds">라운드 수</label>
                    <select id="totalRounds" class="select-full">
                        <option value="5">5 라운드</option>
                        <option value="10" selected>10 라운드</option>
                        <option value="15">15 라운드</option>
                        <option value="20">20 라운드</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>게임 모드 <span id="songCountInfo" class="song-count-info"></span></label>
                <div class="mode-options">
                    <label class="mode-option">
                        <input type="radio" name="gameMode" value="RANDOM" checked>
                        <span class="mode-label">
                            <strong>전체 랜덤</strong>
                            <small>모든 노래 중 랜덤 출제</small>
                        </span>
                    </label>
                    <label class="mode-option">
                        <input type="radio" name="gameMode" value="FIXED_GENRE">
                        <span class="mode-label">
                            <strong>장르 고정</strong>
                            <small>선택한 장르에서만 출제</small>
                        </span>
                    </label>
                    <label class="mode-option">
                        <input type="radio" name="gameMode" value="FIXED_ARTIST">
                        <span class="mode-label">
                            <strong>아티스트 고정</strong>
                            <small>선택한 아티스트 노래만 출제</small>
                        </span>
                    </label>
                    <label class="mode-option">
                        <input type="radio" name="gameMode" value="FIXED_YEAR">
                        <span class="mode-label">
                            <strong>연도 고정</strong>
                            <small>선택한 연도 노래만 출제</small>
                        </span>
                    </label>
                </div>
            </div>

            <!-- 장르 선택 (FIXED_GENRE) -->
            <div class="form-group mode-selection-area" id="genreSelectArea" style="display:none;">
                <label>장르 선택</label>
                <select id="fixedGenreId" class="mode-select">
                    <option value="">선택하세요</option>
                    <option th:each="genre : ${genres}" th:value="${genre.id}" th:text="${genre.name}"></option>
                </select>
            </div>

            <!-- 아티스트 선택 (FIXED_ARTIST) -->
            <div class="form-group mode-selection-area" id="artistSelectArea" style="display:none;">
                <label>아티스트 선택 <span id="artistSelectCountInfo" class="filter-count-info"></span></label>
                <input type="text" id="artistSearchInput" placeholder="아티스트명 검색..." class="filter-search-input" autocomplete="off">
                <div class="multi-select-chips" id="artistSelectChips">
                    <div class="chips-loading">로딩 중...</div>
                </div>
            </div>

            <!-- 연도 선택 (FIXED_YEAR) -->
            <div class="form-group mode-selection-area" id="yearSelectArea" style="display:none;">
                <label>연도 선택 <span id="yearSelectCountInfo" class="filter-count-info"></span></label>
                <div class="multi-select-chips" id="yearSelectChips">
                    <div class="chips-loading">로딩 중...</div>
                </div>
            </div>

            <!-- 아티스트 유형 (전체/솔로/그룹) -->
            <div class="form-group" id="artistTypeArea">
                <label>아티스트 유형</label>
                <div class="artist-type-options">
                    <label class="type-option">
                        <input type="radio" name="artistType" value="all" checked>
                        <span>전체</span>
                    </label>
                    <label class="type-option">
                        <input type="radio" name="artistType" value="solo">
                        <span>솔로만</span>
                    </label>
                    <label class="type-option">
                        <input type="radio" name="artistType" value="group">
                        <span>그룹만</span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="toggle-option">
                    <input type="checkbox" id="isPrivate">
                    <span class="toggle-label">🔒 비공개 방 (코드로만 입장 가능)</span>
                </label>
            </div>

            <div class="form-actions">
                <a href="/game/multi" class="btn btn-cancel">취소</a>
                <button type="button" class="btn btn-create-room" onclick="createRoom()">방 만들기</button>
            </div>
        </div>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/client/multi-create.js}"></script>
</body>
</html>