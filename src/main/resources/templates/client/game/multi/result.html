<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('Í≤åÏûÑ Í≤∞Í≥º - Song Quiz')}"></head>
<link rel="stylesheet" th:href="@{/css/client/result.css}">
<body class="client-page result-page">

<div class="client-container">
    <header class="result-header">
        <div style="display: flex; justify-content: flex-end; padding: 8px;">
            <a href="/" class="btn-home">üè† Ìôà</a>
        </div>
        <h1>üèÜ Í≤åÏûÑ Ï¢ÖÎ£å!</h1>
        <p class="room-name" th:text="${room.roomName}">Î∞© Ïù¥Î¶Ñ</p>
    </header>

    <main class="result-main">
        <div class="podium-section">
            <!-- 2Îì± -->
            <div class="podium-item second" th:if="${#lists.size(results) > 1}">
                <div class="podium-rank">ü•à</div>
                <div class="podium-tier">
                    <span class="tier-badge" th:classappend="${results[1].multiTier}"
                          th:text="${results[1].multiTierDisplayName}">Î∏åÎ°†Ï¶à</span>
                </div>
                <div class="podium-player second-name" th:text="${results[1].nickname}">2Îì±</div>
                <div class="podium-score" th:text="${results[1].score} + 'Ï†ê'">0Ï†ê</div>
                <div class="podium-lp">
                    <span class="lp-change"
                          th:classappend="${results[1].lpChange > 0} ? 'positive' : (${results[1].lpChange < 0} ? 'negative' : 'neutral')">
                        <span th:if="${results[1].lpChange > 0}">+</span><span th:text="${results[1].lpChange}">0</span> LP
                    </span>
                </div>
                <div class="podium-stand second-stand">2</div>
            </div>

            <!-- 1Îì± -->
            <div class="podium-item first" th:if="${#lists.size(results) > 0}">
                <div class="podium-crown">üëë</div>
                <div class="podium-rank">ü•á</div>
                <div class="podium-tier">
                    <span class="tier-badge" th:classappend="${results[0].multiTier}"
                          th:text="${results[0].multiTierDisplayName}">Î∏åÎ°†Ï¶à</span>
                </div>
                <div class="podium-player first-name" th:text="${results[0].nickname}">1Îì±</div>
                <div class="podium-score" th:text="${results[0].score} + 'Ï†ê'">0Ï†ê</div>
                <div class="podium-lp">
                    <span class="lp-change positive">
                        +<span th:text="${results[0].lpChange}">100</span> LP
                    </span>
                </div>
                <div class="podium-stand first-stand">1</div>
            </div>

            <!-- 3Îì± -->
            <div class="podium-item third" th:if="${#lists.size(results) > 2}">
                <div class="podium-rank">ü•â</div>
                <div class="podium-tier">
                    <span class="tier-badge" th:classappend="${results[2].multiTier}"
                          th:text="${results[2].multiTierDisplayName}">Î∏åÎ°†Ï¶à</span>
                </div>
                <div class="podium-player third-name" th:text="${results[2].nickname}">3Îì±</div>
                <div class="podium-score" th:text="${results[2].score} + 'Ï†ê'">0Ï†ê</div>
                <div class="podium-lp">
                    <span class="lp-change"
                          th:classappend="${results[2].lpChange > 0} ? 'positive' : (${results[2].lpChange < 0} ? 'negative' : 'neutral')">
                        <span th:if="${results[2].lpChange > 0}">+</span><span th:text="${results[2].lpChange}">0</span> LP
                    </span>
                </div>
                <div class="podium-stand third-stand">3</div>
            </div>
        </div>

        <!-- Ï†ÑÏ≤¥ ÏàúÏúÑ -->
        <div class="full-ranking">
            <h2>üìä Ï†ÑÏ≤¥ ÏàúÏúÑ</h2>
            <div class="ranking-list">
                <div th:each="r : ${results}" class="ranking-item"
                     th:classappend="${r.memberId == member.id} ? 'me' : ''">
                    <span class="rank" th:text="${r.rank}">1</span>
                    <div class="player-info">
                        <span class="tier-badge" th:classappend="${r.multiTier}"
                              th:text="${r.multiTierDisplayName}">Î∏åÎ°†Ï¶à</span>
                        <span class="player-name">
                            <span th:if="${r.isHost}">üëë </span>
                            <span th:text="${r.nickname}">ÎãâÎÑ§ÏûÑ</span>
                            <span th:if="${r.memberId == member.id}" class="me-badge">(ÎÇò)</span>
                        </span>
                    </div>
                    <div class="stats-info">
                        <span class="lp-change"
                              th:classappend="${r.lpChange > 0} ? 'positive' : (${r.lpChange < 0} ? 'negative' : 'neutral')">
                            <span th:if="${r.lpChange > 0}">+</span><span th:text="${r.lpChange}">0</span> LP
                        </span>
                        <span class="correct-count" th:text="'Ï†ïÎãµ ' + ${r.correctCount} + 'Í∞ú'">Ï†ïÎãµ 0Í∞ú</span>
                        <span class="total-score" th:text="${r.score} + 'Ï†ê'">0Ï†ê</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="result-actions">
            <a href="/game/multi" class="btn btn-lobby">Î°úÎπÑÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</a>
        </div>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
</body>
</html>
