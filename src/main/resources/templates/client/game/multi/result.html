<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('게임 결과 - Song Quiz')}"></head>
<body class="client-page result-page">
<div class="client-container">
    <header class="result-header">
        <h1>🏆 게임 종료!</h1>
        <p class="room-name" th:text="${room.roomName}">방 이름</p>
    </header>

    <main class="result-main">
        <div class="podium-section">
            <!-- 2등 -->
            <div class="podium-item second" th:if="${#lists.size(results) > 1}">
                <div class="podium-rank">🥈</div>
                <div class="podium-player" th:text="${results[1].nickname}">2등</div>
                <div class="podium-score" th:text="${results[1].score} + '점'">0점</div>
                <div class="podium-correct" th:text="'정답: ' + ${results[1].correctCount} + '개'">정답: 0개</div>
                <div class="podium-stand second-stand">2</div>
            </div>

            <!-- 1등 -->
            <div class="podium-item first" th:if="${#lists.size(results) > 0}">
                <div class="podium-crown">👑</div>
                <div class="podium-rank">🥇</div>
                <div class="podium-player" th:text="${results[0].nickname}">1등</div>
                <div class="podium-score" th:text="${results[0].score} + '점'">0점</div>
                <div class="podium-correct" th:text="'정답: ' + ${results[0].correctCount} + '개'">정답: 0개</div>
                <div class="podium-stand first-stand">1</div>
            </div>

            <!-- 3등 -->
            <div class="podium-item third" th:if="${#lists.size(results) > 2}">
                <div class="podium-rank">🥉</div>
                <div class="podium-player" th:text="${results[2].nickname}">3등</div>
                <div class="podium-score" th:text="${results[2].score} + '점'">0점</div>
                <div class="podium-correct" th:text="'정답: ' + ${results[2].correctCount} + '개'">정답: 0개</div>
                <div class="podium-stand third-stand">3</div>
            </div>
        </div>

        <!-- 전체 순위 -->
        <div class="full-ranking">
            <h2>📊 전체 순위</h2>
            <div class="ranking-list">
                <div th:each="r : ${results}" class="ranking-item"
                     th:classappend="${r.memberId == member.id} ? 'me' : ''">
                    <span class="rank" th:text="${r.rank}">1</span>
                    <span class="player-name">
                        <span th:if="${r.isHost}">👑 </span>
                        <span th:text="${r.nickname}">닉네임</span>
                        <span th:if="${r.memberId == member.id}" class="me-badge">(나)</span>
                    </span>
                    <span class="correct-count" th:text="'정답 ' + ${r.correctCount} + '개'">정답 0개</span>
                    <span class="total-score" th:text="${r.score} + '점'">0점</span>
                </div>
            </div>
        </div>

        <div class="result-actions">
            <a href="/game/multi" class="btn btn-lobby">로비로 돌아가기</a>
        </div>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
</body>
</html>