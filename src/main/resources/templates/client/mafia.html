<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('마피아 직업 분배')}"></head>
<body class="client-page">
<div class="mafia-container">
    <header class="mafia-header">
        <a href="/" class="back-link">← 홈으로</a>
        <h1>🎭 마피아 직업 분배</h1>
        <p>참가자에게 직업을 균등하게 분배합니다</p>
    </header>

    <main class="mafia-main">
        <!-- 설정 영역 -->
        <section class="mafia-section setup-section">
            <h2>1. 참가자 입력</h2>
            <div class="participants-input">
                <textarea id="participantsInput"
                          placeholder="참가자 이름을 한 줄에 하나씩 입력하세요&#10;예:&#10;철수&#10;영희&#10;민수"
                          rows="6"></textarea>
                <div class="participant-count">
                    참가자: <span id="participantCount">0</span>명
                </div>
            </div>
        </section>

        <section class="mafia-section roles-section">
            <h2>2. 직업 설정</h2>
            <div class="roles-grid" id="rolesGrid">
                <!-- 기본 직업들 -->
                <div class="role-item">
                    <span class="role-icon">🔪</span>
                    <span class="role-name">마피아</span>
                    <input type="number" class="role-count" data-role="마피아" min="0" value="2">
                </div>
                <div class="role-item">
                    <span class="role-icon">👤</span>
                    <span class="role-name">시민</span>
                    <input type="number" class="role-count" data-role="시민" min="0" value="4">
                </div>
                <div class="role-item">
                    <span class="role-icon">💉</span>
                    <span class="role-name">의사</span>
                    <input type="number" class="role-count" data-role="의사" min="0" value="1">
                </div>
                <div class="role-item">
                    <span class="role-icon">🔍</span>
                    <span class="role-name">경찰</span>
                    <input type="number" class="role-count" data-role="경찰" min="0" value="1">
                </div>
            </div>

            <!-- 커스텀 직업 추가 -->
            <div class="custom-role-add">
                <input type="text" id="customRoleName" placeholder="직업 이름">
                <input type="text" id="customRoleIcon" placeholder="이모지" maxlength="2">
                <button type="button" class="btn btn-add" onclick="addCustomRole()">+ 추가</button>
            </div>

            <div class="role-summary">
                총 직업 수: <span id="totalRoleCount">8</span>명
                <span id="roleWarning" class="warning hidden">⚠️ 참가자 수와 맞지 않습니다</span>
            </div>
        </section>

        <section class="mafia-section">
            <button type="button" class="btn btn-distribute" onclick="distributeRoles()">
                🎲 직업 분배하기
            </button>
        </section>

        <!-- 결과 영역 -->
        <section class="mafia-section result-section hidden" id="resultSection">
            <h2>3. 분배 결과</h2>
            <p class="result-notice">⚠️ 진행자 전용 - 참가자에게 보여주지 마세요!</p>

            <div class="result-controls">
                <button type="button" class="btn btn-toggle" onclick="toggleAllResults()">
                    👁️ 전체 보기/숨기기
                </button>
                <button type="button" class="btn btn-redistribute" onclick="distributeRoles()">
                    🔄 다시 분배
                </button>
            </div>

            <div class="result-grid" id="resultGrid">
                <!-- JS에서 생성 -->
            </div>

            <!-- 직업별 요약 -->
            <div class="role-summary-result" id="roleSummaryResult">
                <!-- JS에서 생성 -->
            </div>
        </section>
    </main>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/client/mafia.js}"></script>
</body>
</html>
