<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('Song Quiz - 노래 맞추기 게임')}"></head>
<body class="client-page">
<div class="client-container">
    <header class="client-header">
        <div class="header-top">
            <!-- PC: 기존 방식 유지 -->
            <div class="header-actions-desktop">
                <button class="btn btn-theme" onclick="toggleTheme()" aria-label="테마 전환" title="테마 전환">
                    <span class="theme-icon sun">☀️</span>
                    <span class="theme-icon moon">🌙</span>
                    <span class="theme-label">테마</span>
                </button>
                <div class="user-info" id="userInfoDesktop">
                    <!-- JS에서 로그인 상태에 따라 표시 -->
                </div>
            </div>

            <!-- 모바일: 테마 버튼 + 햄버거 메뉴 -->
            <div class="header-actions-mobile">
                <button class="btn btn-theme-mobile" onclick="toggleTheme()" aria-label="테마 전환" title="테마 전환">
                    <span class="theme-icon sun">☀️</span>
                    <span class="theme-icon moon">🌙</span>
                </button>
                <button class="hamburger-btn" id="hamburgerBtn" onclick="toggleMobileMenu()" aria-label="메뉴 열기" aria-expanded="false">
                    <span class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
            </div>
        </div>

        <!-- 모바일 드롭다운 메뉴 -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-content">
                <div class="mobile-menu-user" id="userInfoMobile">
                    <!-- JS에서 로그인 상태에 따라 표시 -->
                </div>
            </div>
        </div>

        <h1>🎵 Song Quiz</h1>
        <p>노래를 듣고 제목을 맞춰보세요!</p>
    </header>

    <main class="client-main">
        <!-- 벤토 그리드 레이아웃 -->
        <div class="bento-grid">
            <!-- 1. 맞추기 게임 (가장 큰 카드 - 2x2) -->
            <div class="bento-card bento-guess">
                <div class="bento-card-header">
                    <span class="bento-icon">🎯</span>
                    <h2>맞추기 게임</h2>
                </div>
                <p class="bento-desc">노래를 듣고 제목을 맞춰보세요</p>
                <div class="guess-grid">
                    <!-- 일반 맞추기 -->
                    <a th:if="${menuStatus == null or menuStatus['SOLO_GUESS'] == null or menuStatus['SOLO_GUESS']}"
                       href="/game/solo/guess" class="guess-item">
                        <span class="guess-icon">🎵</span>
                        <span class="guess-label">일반</span>
                        <span class="guess-sub">다양한 장르</span>
                    </a>
                    <div th:if="${menuStatus != null and menuStatus['SOLO_GUESS'] != null and !menuStatus['SOLO_GUESS']}"
                         class="guess-item disabled">
                        <span class="guess-icon">🎵</span>
                        <span class="guess-label">일반</span>
                        <span class="coming-soon-badge">준비 중</span>
                    </div>

                    <!-- 아티스트 챌린지 -->
                    <a th:if="${menuStatus == null or menuStatus['FAN_CHALLENGE'] == null or menuStatus['FAN_CHALLENGE']}"
                       href="/game/fan-challenge" class="guess-item artist">
                        <span class="guess-icon">🏆</span>
                        <span class="guess-label">아티스트</span>
                        <span class="guess-sub">덕후력 테스트</span>
                    </a>
                    <div th:if="${menuStatus != null and menuStatus['FAN_CHALLENGE'] != null and !menuStatus['FAN_CHALLENGE']}"
                         class="guess-item disabled">
                        <span class="guess-icon">🏆</span>
                        <span class="guess-label">아티스트</span>
                        <span class="coming-soon-badge">준비 중</span>
                    </div>

                    <!-- 장르 챌린지 -->
                    <a th:if="${menuStatus == null or menuStatus['GENRE_CHALLENGE'] == null or menuStatus['GENRE_CHALLENGE']}"
                       href="/game/genre-challenge" class="guess-item genre">
                        <span class="guess-icon">🎸</span>
                        <span class="guess-label">장르</span>
                        <span class="guess-sub">장르별 도전</span>
                    </a>
                    <div th:if="${menuStatus != null and menuStatus['GENRE_CHALLENGE'] != null and !menuStatus['GENRE_CHALLENGE']}"
                         class="guess-item disabled">
                        <span class="guess-icon">🎸</span>
                        <span class="guess-label">장르</span>
                        <span class="coming-soon-badge">준비 중</span>
                    </div>

                    <!-- 레트로 챌린지 -->
                    <a th:if="${menuStatus == null or menuStatus['RETRO'] == null or menuStatus['RETRO']}"
                       href="/game/retro" class="guess-item retro">
                        <span class="guess-icon">📻</span>
                        <span class="guess-label">레트로</span>
                        <span class="guess-sub">2000년 이전</span>
                    </a>
                    <div th:if="${menuStatus != null and menuStatus['RETRO'] != null and !menuStatus['RETRO']}"
                         class="guess-item disabled">
                        <span class="guess-icon">📻</span>
                        <span class="guess-label">레트로</span>
                        <span class="coming-soon-badge">준비 중</span>
                    </div>
                </div>
            </div>

            <!-- 2. 게임 진행용 (1x1) -->
            <a th:if="${menuStatus == null or menuStatus['SOLO_HOST'] == null or menuStatus['SOLO_HOST']}"
               href="/game/solo/host" class="bento-card bento-host">
                <span class="bento-icon">📺</span>
                <h2>게임 진행용</h2>
                <p class="bento-desc">출제자가 되어<br>친구들과 함께!</p>
                <span class="bento-action">시작하기 →</span>
            </a>
            <div th:if="${menuStatus != null and menuStatus['SOLO_HOST'] != null and !menuStatus['SOLO_HOST']}"
                 class="bento-card bento-host disabled">
                <span class="bento-icon">📺</span>
                <h2>게임 진행용</h2>
                <p class="bento-desc">출제자가 되어<br>친구들과 함께!</p>
                <span class="coming-soon-badge">준비 중</span>
            </div>

            <!-- 3. 멀티 게임 (1x1) -->
            <a th:if="${menuStatus == null or menuStatus['MULTI_LOBBY'] == null or menuStatus['MULTI_LOBBY']}"
               href="/game/multi" class="bento-card bento-multi">
                <span class="bento-icon">👥</span>
                <h2>멀티 게임</h2>
                <p class="bento-desc">실시간 대결!</p>
                <span class="bento-action">로비 입장 →</span>
            </a>
            <div th:if="${menuStatus != null and menuStatus['MULTI_LOBBY'] != null and !menuStatus['MULTI_LOBBY']}"
                 class="bento-card bento-multi disabled">
                <span class="bento-icon">👥</span>
                <h2>멀티 게임</h2>
                <p class="bento-desc">실시간 대결!</p>
                <span class="coming-soon-badge">준비 중</span>
            </div>

            <!-- 4. 전체 랭킹 (1x1) - 비로그인 시만 표시 -->
            <a href="/ranking" class="bento-card bento-ranking" id="bentoRanking">
                <span class="bento-icon">🥇</span>
                <h2>전체 랭킹</h2>
                <div class="ranking-preview" id="rankingPreview">
                    <!-- JS에서 로딩 -->
                </div>
                <span class="bento-action">더 보기 →</span>
            </a>

            <!-- 5. 내 순위 (1x1) - 로그인 시만 표시 (전체 랭킹 대신) -->
            <div class="bento-card bento-myrank hidden" id="bentoMyRank">
                <span class="bento-icon">🏅</span>
                <h2>내 순위</h2>
                <div class="myrank-content" id="myRankContent">
                    <!-- JS에서 로딩 -->
                </div>
                <a href="/ranking" class="bento-action">전체 랭킹 →</a>
            </div>

            <!-- 6. 커뮤니티 (비로그인 시 전체 랭킹 옆, 로그인 시 아래로) -->
            <a href="/board" class="bento-card bento-community" id="bentoCommunity">
                <span class="bento-icon">💬</span>
                <h2>커뮤니티</h2>
                <p class="bento-desc">곡 추천, 의견 공유</p>
                <span class="bento-action">바로가기 →</span>
            </a>

            <!-- 7. 챌린지 TOP (탭: 아티스트 / 장르) -->
            <div class="bento-card bento-challenge-top hidden" id="bentoChallengeTop">
                <div class="bento-card-header">
                    <span class="bento-icon">🏆</span>
                    <h2>챌린지 TOP</h2>
                    <div class="challenge-tabs">
                        <button class="challenge-tab active" data-tab="artist" onclick="switchChallengeTab('artist')">아티스트</button>
                        <button class="challenge-tab" data-tab="genre" onclick="switchChallengeTab('genre')">장르</button>
                    </div>
                </div>
                <!-- 아티스트 챌린지 -->
                <div class="challenge-content active" id="artistContent">
                    <div class="stage-tabs" id="stageTabs">
                        <!-- JS에서 활성화된 단계 탭 렌더링 -->
                    </div>
                    <div class="artist-scroll" id="artistRankingScroll">
                        <!-- JS에서 로딩 -->
                    </div>
                </div>
                <!-- 장르 챌린지 -->
                <div class="challenge-content" id="genreContent">
                    <div class="artist-scroll" id="genreRankingScroll">
                        <!-- JS에서 로딩 -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="client-footer">
        <p>© 2024 Song Quiz. Made with 🎵</p>
    </footer>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/common/drag-scroll.js}"></script>
<script th:src="@{/js/client/home.js}"></script>
</body>
</html>
