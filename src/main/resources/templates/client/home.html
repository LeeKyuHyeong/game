<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('Song Quiz - 노래 맞추기 게임')}"></head>
<body class="client-page">
<div class="client-container">
    <header class="client-header">
        <div class="header-top">
            <!-- PC: 기존 방식 유지 -->
            <div class="header-actions-desktop">
                <button class="btn btn-theme" onclick="toggleTheme()" aria-label="테마 전환" title="테마 전환">
                    <span class="theme-icon sun">☀️</span>
                    <span class="theme-icon moon">🌙</span>
                    <span class="theme-label">테마</span>
                </button>
                <div class="user-info" id="userInfoDesktop">
                    <!-- JS에서 로그인 상태에 따라 표시 -->
                </div>
            </div>

            <!-- 모바일: 테마 버튼 + 햄버거 메뉴 -->
            <div class="header-actions-mobile">
                <button class="btn btn-theme-mobile" onclick="toggleTheme()" aria-label="테마 전환" title="테마 전환">
                    <span class="theme-icon sun">☀️</span>
                    <span class="theme-icon moon">🌙</span>
                </button>
                <button class="hamburger-btn" id="hamburgerBtn" onclick="toggleMobileMenu()" aria-label="메뉴 열기" aria-expanded="false">
                    <span class="hamburger-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
            </div>
        </div>

        <!-- 모바일 드롭다운 메뉴 -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-content">
                <div class="mobile-menu-user" id="userInfoMobile">
                    <!-- JS에서 로그인 상태에 따라 표시 -->
                </div>
            </div>
        </div>

        <h1>🎵 Song Quiz</h1>
        <p>노래를 듣고 제목을 맞춰보세요!</p>
    </header>

    <main class="client-main">
        <div class="home-content">
            <div class="game-modes">
                <div class="mode-card">
                    <div class="mode-icon">🎤</div>
                    <h2>솔로 게임</h2>
                    <p>혼자서 노래 맞추기에 도전!</p>
                    <div class="mode-grid">
                        <!-- 게임 진행용 -->
                        <a th:if="${menuStatus == null or menuStatus['SOLO_HOST'] == null or menuStatus['SOLO_HOST']}"
                           href="/game/solo/host" class="grid-item">
                            <span class="grid-icon">📺</span>
                            <span class="grid-label">게임 진행용</span>
                        </a>
                        <div th:if="${menuStatus != null and menuStatus['SOLO_HOST'] != null and !menuStatus['SOLO_HOST']}"
                             class="grid-item disabled" title="준비 중입니다">
                            <span class="grid-icon">📺</span>
                            <span class="grid-label">게임 진행용</span>
                            <span class="coming-soon-badge">준비 중</span>
                        </div>

                        <!-- 내가 맞추기 -->
                        <button th:if="${menuStatus == null or menuStatus['SOLO_GUESS'] == null or menuStatus['SOLO_GUESS']}"
                                type="button" class="grid-item" onclick="handleGuessClick()">
                            <span class="grid-icon">🎯</span>
                            <span class="grid-label">내가 맞추기</span>
                        </button>
                        <div th:if="${menuStatus != null and menuStatus['SOLO_GUESS'] != null and !menuStatus['SOLO_GUESS']}"
                             class="grid-item disabled" title="준비 중입니다">
                            <span class="grid-icon">🎯</span>
                            <span class="grid-label">내가 맞추기</span>
                            <span class="coming-soon-badge">준비 중</span>
                        </div>

                        <!-- 아티스트 챌린지 -->
                        <a th:if="${menuStatus == null or menuStatus['FAN_CHALLENGE'] == null or menuStatus['FAN_CHALLENGE']}"
                           href="/game/fan-challenge" class="grid-item">
                            <span class="grid-icon">🏆</span>
                            <span class="grid-label">아티스트 챌린지</span>
                        </a>
                        <div th:if="${menuStatus != null and menuStatus['FAN_CHALLENGE'] != null and !menuStatus['FAN_CHALLENGE']}"
                             class="grid-item disabled" title="20곡 이상 보유한 아티스트만 도전 가능">
                            <span class="grid-icon">🏆</span>
                            <span class="grid-label">아티스트 챌린지</span>
                            <span class="coming-soon-badge">준비 중</span>
                        </div>

                        <!-- 레트로 챌린지 -->
                        <a th:if="${menuStatus == null or menuStatus['RETRO'] == null or menuStatus['RETRO']}"
                           href="/game/retro" class="grid-item">
                            <span class="grid-icon">📻</span>
                            <span class="grid-label">레트로 챌린지</span>
                        </a>
                        <div th:if="${menuStatus != null and menuStatus['RETRO'] != null and !menuStatus['RETRO']}"
                             class="grid-item disabled" title="준비 중입니다">
                            <span class="grid-icon">📻</span>
                            <span class="grid-label">레트로 챌린지</span>
                            <span class="coming-soon-badge">준비 중</span>
                        </div>
                    </div>
                </div>

                <div class="mode-card">
                    <div class="mode-icon">👥</div>
                    <h2>멀티 게임</h2>
                    <p>친구들과 함께 대결!</p>
                    <div class="mode-grid">
                        <!-- 로비 입장 -->
                        <a th:if="${menuStatus == null or menuStatus['MULTI_LOBBY'] == null or menuStatus['MULTI_LOBBY']}"
                           href="/game/multi" class="grid-item primary">
                            <span class="grid-icon">🚪</span>
                            <span class="grid-label">로비 입장</span>
                        </a>
                        <div th:if="${menuStatus != null and menuStatus['MULTI_LOBBY'] != null and !menuStatus['MULTI_LOBBY']}"
                             class="grid-item disabled" title="준비 중입니다">
                            <span class="grid-icon">🚪</span>
                            <span class="grid-label">로비 입장</span>
                            <span class="coming-soon-badge">준비 중</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 내 순위 섹션 (로그인 사용자용) -->
            <div class="my-rank-section hidden" id="myRankSection">
                <div class="my-rank-content" id="myRankContent">
                    <!-- JS에서 로딩 -->
                </div>
                <a href="/ranking" class="btn btn-ranking">전체 랭킹 보기</a>
            </div>

            <!-- 아티스트 챌린지 랭킹 섹션 -->
            <div class="artist-ranking-section hidden" id="artistRankingSection">
                <div class="artist-ranking-header">
                    <h3>아티스트 챌린지 TOP</h3>
                    <p class="artist-ranking-subtitle">정답 수가 같으면 클리어 시간이 빠른 순</p>
                </div>
                <div class="artist-ranking-scroll" id="artistRankingScroll">
                    <!-- JS에서 로딩 -->
                </div>
            </div>
        </div>
    </main>

    <footer class="client-footer">
        <div class="footer-links">
            <a href="/board" class="footer-link">커뮤니티</a>
            <a href="/stats" class="footer-link">통계</a>
        </div>
    </footer>
</div>

<!-- 로그인 안내 모달 -->
<div class="login-prompt-modal" id="loginPromptModal">
    <div class="modal-overlay" onclick="closeLoginPrompt()"></div>
    <div class="modal-content">
        <div class="modal-icon">🎵</div>
        <h3>로그인하면 더 재미있어요!</h3>
        <p>회원으로 플레이하면 랭킹에 기록되고,<br>티어 승급의 재미를 느낄 수 있어요.</p>
        <div class="modal-buttons">
            <button class="btn btn-secondary" onclick="proceedWithoutLogin()">그냥 할래요</button>
            <a href="/auth/login?redirect=/game/solo/guess" class="btn btn-primary">로그인하기</a>
        </div>
    </div>
</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/common/drag-scroll.js}"></script>
<script th:src="@{/js/client/home.js}"></script>
</body>
</html>
