<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{common/fragments/head :: clientHead('전체 랭킹 - Song Quiz')}"></head>
<body class="client-page ranking-page">
<div class="client-container">
    <header class="client-header compact">
        <nav class="header-nav">
            <a href="/" class="btn-home">🏠 홈</a>
        </nav>
        <h1>🏆 전체 랭킹</h1>
        <p>Song Quiz 최고의 플레이어들</p>
    </header>

    <main class="client-main">
        <div class="ranking-content">
            <!-- 메인 탭 (6개) - PC/태블릿 -->
            <div class="game-mode-tabs six-tabs desktop-tabs">
                <button class="mode-tab active" data-mode="tier">
                    <span class="tab-icon">🏆</span>
                    <span class="tab-label">멀티 티어</span>
                </button>
                <button class="mode-tab" data-mode="best30">
                    <span class="tab-icon">🎯</span>
                    <span class="tab-label">30곡 챌린지</span>
                </button>
                <button class="mode-tab" data-mode="retro">
                    <span class="tab-icon">📻</span>
                    <span class="tab-label">레트로</span>
                </button>
                <button class="mode-tab" data-mode="fanChallenge">
                    <span class="tab-icon">🎤</span>
                    <span class="tab-label">팬 챌린지</span>
                </button>
                <button class="mode-tab" data-mode="genreChallenge">
                    <span class="tab-icon">🎸</span>
                    <span class="tab-label">장르 챌린지</span>
                </button>
                <button class="mode-tab" data-mode="stats">
                    <span class="tab-icon">📊</span>
                    <span class="tab-label">통계</span>
                </button>
            </div>

            <!-- 메인 탭 - 모바일 (select) -->
            <div class="mobile-tab-select">
                <select id="mobileTabSelect">
                    <option value="tier">🏆 멀티 티어</option>
                    <option value="best30">🎯 30곡 챌린지</option>
                    <option value="retro">📻 레트로</option>
                    <option value="fanChallenge">🎤 팬 챌린지</option>
                    <option value="genreChallenge">🎸 장르 챌린지</option>
                    <option value="stats">📊 통계</option>
                </select>
            </div>

            <!-- 멀티게임 티어 안내 -->
            <div class="best-score-notice" id="tierNotice">
                <span class="notice-icon">🏆</span>
                <span class="notice-text">멀티게임 순위에 따라 LP를 획득하여 티어가 결정됩니다</span>
            </div>

            <!-- 30개 챌린지 기간 탭 -->
            <div class="period-tabs" id="best30PeriodTabs" style="display: none;">
                <button class="period-tab active" data-period="weekly">
                    <span class="tab-label">이번 주</span>
                </button>
                <button class="period-tab" data-period="monthly">
                    <span class="tab-label">이번 달</span>
                </button>
                <button class="period-tab" data-period="alltime">
                    <span class="tab-label">명예의 전당</span>
                </button>
            </div>

            <!-- 30개 챌린지 안내 -->
            <div class="best-score-notice" id="best30Notice" style="display: none;">
                <span class="notice-icon">🎯</span>
                <span class="notice-text">전체 랜덤 · 30곡 게임 최고점 기준</span>
            </div>

            <!-- 레트로 서브탭 -->
            <div class="period-tabs" id="retroPeriodTabs" style="display: none;">
                <button class="period-tab active" data-period="score">
                    <span class="tab-label">누적 점수</span>
                </button>
                <button class="period-tab" data-period="best30">
                    <span class="tab-label">30곡 최고점</span>
                </button>
                <button class="period-tab" data-period="weekly">
                    <span class="tab-label">주간</span>
                </button>
            </div>

            <!-- 레트로 안내 -->
            <div class="best-score-notice" id="retroNotice" style="display: none;">
                <span class="notice-icon">📻</span>
                <span class="notice-text">2000년 이전 노래 전용 모드</span>
            </div>

            <!-- 팬 챌린지 서브탭 -->
            <div class="period-tabs" id="fanChallengePeriodTabs" style="display: none;">
                <button class="period-tab active" data-period="perfect">
                    <span class="tab-label">퍼펙트 클리어</span>
                </button>
                <button class="period-tab" data-period="artist">
                    <span class="tab-label">도전 아티스트</span>
                </button>
            </div>

            <!-- 팬 챌린지 안내 -->
            <div class="best-score-notice" id="fanChallengeNotice" style="display: none;">
                <span class="notice-icon">🎤</span>
                <span class="notice-text">하드코어 난이도 기준 · 아티스트별 20곡 도전</span>
            </div>

            <!-- 장르 챌린지 장르 선택 -->
            <div class="genre-select-container" id="genreChallengeGenreSelect" style="display: none;">
                <label for="genreSelectDropdown">장르 선택:</label>
                <select id="genreSelectDropdown">
                    <option value="">장르를 선택하세요</option>
                    <!-- JS에서 장르 목록 로드 -->
                </select>
            </div>

            <!-- 장르 챌린지 안내 -->
            <div class="best-score-notice" id="genreChallengeNotice" style="display: none;">
                <span class="notice-icon">🎸</span>
                <span class="notice-text">하드코어 난이도 기준 · 장르별 전곡 도전</span>
            </div>

            <!-- 통계 서브 탭 -->
            <div class="stats-tabs-container" id="statsTabsContainer" style="display: none;">
                <!-- 통계 유형 탭 -->
                <div class="period-tabs stats-type-tabs">
                    <button class="period-tab active" data-stats-type="score">
                        <span class="tab-label">최고 누적 점수</span>
                    </button>
                    <button class="period-tab has-subtabs" data-stats-type="participation">
                        <span class="tab-label">최다 참여</span>
                        <span class="subtab-arrow">▼</span>
                    </button>
                    <button class="period-tab" data-stats-type="avgScorePerRound">
                        <span class="tab-label">평균 점수</span>
                    </button>
                    <button class="period-tab" data-stats-type="accuracyMin10">
                        <span class="tab-label">정답률</span>
                    </button>
                </div>
                <!-- 최다 참여 서브탭 -->
                <div class="sub-tabs-container" id="participationSubTabs" style="display: none;">
                    <button class="sub-tab active" data-sub-type="games">최다 게임수</button>
                    <button class="sub-tab" data-sub-type="rounds">최다 라운드</button>
                </div>
                <!-- 내가맞추기 통계 안내 -->
                <div class="best-score-notice" id="guessOnlyNotice">
                    <span class="notice-icon">🎧</span>
                    <span class="notice-text">내가맞추기 통계 (평균 점수/정답률은 10게임 이상만 집계)</span>
                </div>
            </div>

            <!-- TOP 3 포디움 -->
            <div class="top-three-podium" id="topThreePodium">
                <div class="podium-place second" id="place2">
                    <div class="podium-avatar">🥈</div>
                    <div class="podium-tier"></div>
                    <div class="podium-name">-</div>
                    <div class="podium-value">-</div>
                    <div class="podium-stand">2</div>
                </div>
                <div class="podium-place first" id="place1">
                    <div class="podium-avatar">🥇</div>
                    <div class="podium-tier"></div>
                    <div class="podium-name">-</div>
                    <div class="podium-value">-</div>
                    <div class="podium-stand">1</div>
                </div>
                <div class="podium-place third" id="place3">
                    <div class="podium-avatar">🥉</div>
                    <div class="podium-tier"></div>
                    <div class="podium-name">-</div>
                    <div class="podium-value">-</div>
                    <div class="podium-stand">3</div>
                </div>
            </div>

            <!-- 전체 랭킹 리스트 -->
            <div class="ranking-table-section">
                <div class="ranking-table" id="rankingTable">
                    <!-- JS에서 로딩 -->
                </div>
                <div class="empty-state" id="emptyState" style="display:none;">
                    <span class="empty-icon">📊</span>
                    <p>아직 랭킹 데이터가 없습니다.</p>
                    <p class="empty-sub">게임을 플레이하고 랭킹에 도전하세요!</p>
                </div>
            </div>
        </div>
    </main>

</div>

<script th:src="@{/js/common/common.js}"></script>
<script th:src="@{/js/client/ranking.js}"></script>
</body>
</html>
