<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="head(title)">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <title th:text="${title}">Song Quiz</title>
    <!-- FOUC 방지: CSS 로드 전 테마 적용 -->
    <script th:inline="javascript">
        (function() {
            try {
                var saved = localStorage.getItem('theme-preference');
                var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                var theme = saved || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    <link rel="stylesheet" th:href="@{/css/common/common.css}">
    <script th:src="@{/js/common/theme-toggle.js}" defer></script>
</th:block>

<th:block th:fragment="adminHead(title)">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <title th:text="${title}">Song Quiz Admin</title>
    <!-- FOUC 방지: CSS 로드 전 테마 적용 -->
    <script th:inline="javascript">
        (function() {
            try {
                var saved = localStorage.getItem('theme-preference');
                var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                var theme = saved || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    <link rel="stylesheet" th:href="@{/css/common/common.css}">
    <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    <script th:src="@{/js/common/theme-toggle.js}" defer></script>
</th:block>

<th:block th:fragment="clientHead(title)">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <title th:text="${title}">Song Quiz</title>
    <!-- FOUC 방지: CSS 로드 전 테마 적용 -->
    <script th:inline="javascript">
        (function() {
            try {
                var saved = localStorage.getItem('theme-preference');
                var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                var theme = saved || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'light');
            }

            // 게임 페이지(.game-page)에서 다크 테마 강제
            document.addEventListener('DOMContentLoaded', function() {
                if (document.body.classList.contains('game-page')) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                }
            });
        })();
    </script>
    <link rel="stylesheet" th:href="@{/css/common/common.css}">
    <link rel="stylesheet" th:href="@{/css/client/client.css}">
    <script th:src="@{/js/common/theme-toggle.js}" defer></script>
    <script th:src="@{/js/common/common.js}" defer></script>
</th:block>
</html>
